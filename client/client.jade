//- ---------- -//
//-   GLOBAL   -//
//- ---------- -//

//- Head
head
  meta(http-equiv="X-UA-Compatible", content="IE=Edge")
  meta(charset="UTF-8")
  meta(name="viewport", content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no")
  meta(name="application-name", content="SpaiCheck")
  meta(name="description", content="SpaiCheck helps you catch spais!")
  title Spaicheck

//- --------- -//
//-  HELPERS  -//
//- --------- -//

//- Error
template(name="error")
  .tmpl-error
    span Whoops! We couldn't find what you were looking for...

//- Loading
template(name="loading")
  .tmpl-loading
    span Loading...

//- --------- -//
//-  LAYOUTS  -//
//- --------- -//

//- Landing
template(name="landing")
  header
    img.ui.image(src="logo.png")
    +loginButtons
  main
    a(href="{{pathFor 'home'}}")
      h2 Check for Spais!
  footer.ui.bottom.fixed.inverted.fluid.one.item.menu
    .item.header Running on Meteor

//- Dashboard
template(name="dashboard")
  aside#mobile-menu.ui.sidebar.thin.inverted.left.vertical.menu
    +Template.dynamic(template=side)
  .pusher
    aside#desktop-menu.ui.small.inverted.left.fixed.vertical.menu
      +Template.dynamic(template=side)
    #page-wrapper
      +Template.dynamic(template=head)
      +Template.dynamic(template=main)
      footer.ui.bottom.fixed.inverted.fluid.one.item.menu
        .item.header Running on Meteor

//- Dashboard Header
template(name="header")
  header.ui.fixed.top.inverted.menu
    .left.menu
      #side-toggle.ui.black.button &gt;&gt;
      a.item(href="{{pathFor 'home'}}")
        img.ui.small.image(src="/logo.png")
    .right.menu
      .ui.dropdown.item
        if currentUser
          img.ui.avatar.image(src="https://image.eveonline.com/Character/#{currentCharId}_64.jpg")
        else
          img.ui.avatar.image(src="/anon.jpg")
        span &nbsp;#{currentCharName}
        i.dropdown.icon
        .menu
          a.item
            i.user.icon
            span Profile
          a.item
            i.settings.icon
            span Settings
          a.item.logout-button
            i.log.out.icon
            span Log out

//- Dashboard Sidebar
template(name="sidebar")
  .item.header MENU
  .item
    .header Misc
    .menu
      a.item Lorem
  .item
    .header Tools
    .menu
      a.item Ipsum
      a.item Dolor
      a.item Sit
      a.item Amet

//- ---------- -//
//-   ROUTES   -//
//- ---------- -//

//- Home
template(name="home")
  main.ui.fluid.equal.width.stackable.grid
    .ui.four.wide.column
      .ui.raised.very.padded.olive.inverted.compact.segment
        h2.ui.header API Keys
        .ui.section.segment
          h3.ui.header Add a key
          // See https://github.com/aldeed/meteor-autoform#component-and-helper-reference for info on attributes used here
          {{> quickForm schema="AddKeyFormSchema" collection="Keys" id="insertKeyForm" type="insert" buttonContent="Add Key" validation="submit" resetOnSuccess="true" class="newKeyForm"}}
        .ui.section.segment
          h3.ui.header Validate all keys
          button.validate-button Validate

    .ui.six.wide.column
      #active-errors.ui.raised.very.padded.red.inverted.compact.segment
        h2.ui.header Active Errors
        .ui.basic.segment
          .ui.styled.accordion
            each errors
              .title
                i.dropdown.icon
                | Key ##{keyID}
              .content
                .accordion
                  each errorMessage in log
                    .title
                      i.dropdown.icon
                      = errorMessage.createdAt
                    .content
                      | [#{errorMessage.errorType}] #{errorMessage.message}
